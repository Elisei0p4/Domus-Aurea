{% if page_obj.paginator.num_pages > 1 %}
<div class="mt-12 flex flex-col md:flex-row justify-center items-center gap-6 text-sm"
     x-data="{
        goToPage(pageNum) {
            if (!pageNum || pageNum < 1 || pageNum > {{ page_obj.paginator.num_pages }}) return;
            const url = new URL(window.location.href);
            url.searchParams.set('page', pageNum);
            
            // Если мы на странице каталога, используем AJAX
            const catalogFilter = document.querySelector('[x-data^=\'catalogFilter\']');
            if (catalogFilter) {
                window.dispatchEvent(new CustomEvent('filter-navigate', { detail: { url: url.toString() }}));
            } else {
                window.location.href = url.toString();
            }
        },
        goToPageInput() {
            const pageNum = this.$refs.pageInput.value;
            this.goToPage(pageNum);
        }
     }">
    
    <!-- Основные кнопки пагинации -->
    <nav aria-label="Pagination">
        <ul class="inline-flex items-center">
            {% if page_obj.has_previous %}
                <li>
                    <button @click.prevent="goToPage({{ page_obj.previous_page_number }})" class="pagination-btn">
                        <span class="sr-only">Previous</span>
                        <i class="fas fa-angle-left"></i>
                    </button>
                </li>
            {% endif %}

            {% for i in page_obj.paginator.get_elided_page_range %}
                {% if page_obj.number == i %}
                    <li><button disabled class="pagination-btn-active">{{ i }}</button></li>
                {% elif i == page_obj.paginator.ELLIPSIS %}
                     <li><span class="pagination-btn-disabled">{{ i }}</span></li>
                {% else %}
                    <li><button @click.prevent="goToPage({{ i }})" class="pagination-btn">{{ i }}</button></li>
                {% endif %}
            {% endfor %}
            
            {% if page_obj.has_next %}
                <li>
                    <button @click.prevent="goToPage({{ page_obj.next_page_number }})" class="pagination-btn">
                        <span class="sr-only">Next</span>
                        <i class="fas fa-angle-right"></i>
                    </button>
                </li>
            {% endif %}
        </ul>
    </nav>

    <!-- Форма для перехода на страницу -->
    <div class="flex items-center gap-2">
        <span class="text-secondary font-medium">Перейти:</span>
        <input 
            type="number" 
            x-ref="pageInput"
            @keydown.enter.prevent="goToPageInput()"
            value="{{ page_obj.number }}" 
            min="1" 
            max="{{ page_obj.paginator.num_pages }}" 
            class="pagination-goto-input"
        >
        <button @click.prevent="goToPageInput()" class="pagination-goto-btn">OK</button>
    </div>
</div>
{% endif %}